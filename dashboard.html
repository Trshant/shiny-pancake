<html>
<head>
<title>Trshant - Dashboard</title>
<style>


.bar1 {
  fill: green;
}

.bar {
  fill: steelblue;
}

.bar1:hover  , .bar:hover {
  fill: brown;
}

.axis--x path {
  display: none;
}
</style>
</head>
<body>
<div>
<table>
<tr>
<th>
Type Of home ownership
</th>
<th>
Defaulted
</th>
<th>
Not Defaulted
</th>
</tr>
<tr>
<td>
Own
</td>
<td id="Own_defaulter">
</td>
<td id="Own_nondefaulter">
</td>
</tr>

<tr>
<td>
Rent
</td>
<td id="Rent_defaulter">
</td>
<td id="Rent_nondefaulter">
</td>
</tr>

<tr>
<td>
Morgage
</td>
<td id="Morgage_defaulter">
</td>
<td id="Morgage_nondefaulter">
</td>
</tr>

</table>
</div>
<svg width="400" height="250"></svg>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script type="text/javascript">

	function $(str){ return document.querySelectorAll(str) ; }

	var svg = d3.select("svg");

	var margin = {top: 20, right: 20, bottom: 30, left: 40},
	    width = +svg.attr("width") - margin.left - margin.right,
	    height = +svg.attr("height") - margin.top - margin.bottom;

	var x = d3.scaleBand().rangeRound([0, width]).padding(0.1),
	    y = d3.scaleLinear().rangeRound([height, 0]);

	var g = svg.append("g")
	    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

	d3.csv("dashboard_banking_dataset.csv", function(data) {
  		console.log(data.length);
  		var home_own = [];
  		var home_own0 = [];
  		var home_own1 = [];
  		var Own_defaulter = data.filter(function(d) { return d.home_ownership == 1 && d.loan_status == 1 ; });
  		console.log(JSON.stringify(Own_defaulter.length));
  		home_own.push({ name: 'Own' , value: Own_defaulter.length });
  		home_own0.push({ name: 'Own' , value: Own_defaulter.length });
  		$("#Own_defaulter")[0].innerHTML = Own_defaulter.length ;

  		var Own_nondefaulter = data.filter(function(d) { return d.home_ownership == 1 && d.loan_status == 0 ; });
  		console.log(JSON.stringify(Own_nondefaulter.length));
  		home_own.push({ name: 'Own' , value: Own_nondefaulter.length });
  		home_own1.push({ name: 'Own' , value: Own_nondefaulter.length });
  		$("#Own_nondefaulter")[0].innerHTML =Own_nondefaulter.length;

  		var Rent_defaulter = data.filter(function(d) { return d.home_ownership == 2 && d.loan_status == 1 ; });
  		console.log(JSON.stringify(Rent_defaulter.length));
  		home_own.push({ name: 'Rent' , value: Rent_defaulter.length });
  		home_own0.push({ name: 'Rent' , value: Rent_defaulter.length });
  		$("#Rent_defaulter")[0].innerHTML =Rent_defaulter.length ;

  		var Rent_nondefaulter = data.filter(function(d) { return d.home_ownership == 2 && d.loan_status == 0 ; });
  		console.log(JSON.stringify(Rent_nondefaulter.length));
  		home_own.push({ name: 'Rent' , value: Rent_nondefaulter.length });
  		home_own1.push({ name: 'Rent' , value: Rent_nondefaulter.length });
		$("#Rent_nondefaulter")[0].innerHTML = Rent_nondefaulter.length;  		

  		var Morgage_defaulter = data.filter(function(d) { return d.home_ownership == 3 && d.loan_status == 1 ; });
  		console.log(JSON.stringify(Morgage_defaulter.length));
  		home_own.push({ name: 'Morgage' , value: Morgage_defaulter.length });
  		home_own0.push({ name: 'Morgage' , value: Morgage_defaulter.length });
		$("#Morgage_defaulter")[0].innerHTML = Morgage_defaulter.length;

  		var Morgage_nondefaulter = data.filter(function(d) { return d.home_ownership == 3 && d.loan_status == 0 ; });
  		console.log(JSON.stringify(Morgage_nondefaulter.length));
  		home_own.push({ name: 'Morgage' , value: Morgage_nondefaulter.length });
  		home_own1.push({ name: 'Morgage' , value: Morgage_nondefaulter.length });
		$("#Morgage_nondefaulter")[0].innerHTML = Morgage_nondefaulter.length ;


		x.domain(home_own.map(function(d) { return d.name; }));
  		y.domain([0, d3.max(home_own, function(d) { return d.value; })]);

  		g.append("g")
  		      .attr("class", "axis axis--x")
  		      .attr("transform", "translate(0," + height + ")")
  		      .call(d3.axisBottom(x));

		  g.append("g")
		      .attr("class", "axis axis--y")
		      .call(d3.axisLeft(y).ticks())
		    .append("text")
		      .attr("transform", "rotate(-90)")
		      .attr("y", 6)
		      .attr("dy", "0.71em")
		      .attr("text-anchor", "end")
		      .text("Frequency");

		  g.selectAll(".bar")
		    .data(home_own0)
		    .enter().append("rect")
		      .attr("class", "bar")
		      .attr("x", function(d) { return x(d.name)+20; })
		      .attr("y", function(d) { return y(d.value); })
		      .attr("width", "25px" )
		      .attr("height", function(d) { return height - y(d.value); });

		  g.selectAll(".bar1")
		    .data(home_own1)
		    .enter().append("rect")
		      .attr("class", "bar1")
		      .attr("x", function(d) { return x(d.name) + 50; })
		      .attr("y", function(d) { return y(d.value); })
		      .attr("width", "25px" )
		      .attr("height", function(d) { return height - y(d.value); });


	});

</script>
</body>
</html>